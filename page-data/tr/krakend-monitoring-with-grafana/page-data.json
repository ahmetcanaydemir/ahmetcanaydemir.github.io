{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/tr/krakend-monitoring-with-grafana/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Ahmet Can Aydemir","author":"Ahmet Can Aydemir"}},"markdownRemark":{"id":"166e2158-1c32-5470-883c-c3714c209a8b","html":"<p><a href=\"/x/\"></a></p>\n<p>KrakenD, bir veya daha fazla servisten gelen verileri dönüştürebilen, birleştirebilien ve silebilen çok yüksek performanslı, ölçeklendirilebilir açık kaynak kodlu gatewaydir.</p>\n<p>Grafana dashboardu üzerinden KrakenD servislerimizin durumunu nasıl takip edeceğimizi açıklayacağım.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8addae8b8eebf375cfaa28c5d2363444/f84cf/grafana-krakend.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeSgrI//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAEAAQUAAAAAAAAAAAAAAAAAIRARQVFh/9oACAEBAAE/IbIR1lqn/9oADAMBAAIAAwAAABAgz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExcdHw/9oACAEBAAE/EEWlN3mBUWxdUEfQdx25jqGf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"KrakenD Grafana Dashboard\"\n        title=\"KrakenD Grafana Dashboard\"\n        src=\"/static/8addae8b8eebf375cfaa28c5d2363444/1c72d/grafana-krakend.jpg\"\n        srcset=\"/static/8addae8b8eebf375cfaa28c5d2363444/a80bd/grafana-krakend.jpg 148w,\n/static/8addae8b8eebf375cfaa28c5d2363444/1c91a/grafana-krakend.jpg 295w,\n/static/8addae8b8eebf375cfaa28c5d2363444/1c72d/grafana-krakend.jpg 590w,\n/static/8addae8b8eebf375cfaa28c5d2363444/f84cf/grafana-krakend.jpg 880w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Sıfırdan bir dashboard oluşturmak yerine grafana.com’da bulunan önceden hazırlanmış bir dashboard kullanabiliriz. Bu yazıda 5722 id numaralı, dlopez tarafından hazırlanmış KrakenD isimli dashboard’u kullanacağız. Sonrasında ihtiyacınıza göre dashboardu özelleştirebilirsiniz.</p>\n<p>Bu dashboard varsayılan olarak bize şu metrikleri sunuyor:</p>\n<ul>\n<li>Kullanıcılardan KrakenD’ye gelen istekler</li>\n<li>KrakenD’den backendlerinize gelen istekler</li>\n<li>Yanıt verme süreleri</li>\n<li>Hafıza kullanım miktarı ve detayları</li>\n<li>Uç noktalar ve durum kodları</li>\n<li>Heatmapler</li>\n<li>Açık bağlantılar</li>\n<li>Throughput</li>\n<li>Dağıtımlar, timerlar, garbage collection vb.</li>\n</ul>\n<h2 id=\"ön-gereksinimler\" style=\"position:relative;\"><a href=\"#%C3%B6n-gereksinimler\" aria-label=\"ön gereksinimler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ön gereksinimler</h2>\n<ul>\n<li>KrakenD</li>\n</ul>\n<hr>\n<h2 id=\"influxdb-kurulumu\" style=\"position:relative;\"><a href=\"#influxdb-kurulumu\" aria-label=\"influxdb kurulumu permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>InfluxDB Kurulumu</h2>\n<p>Kullanacağımız dashboard metrik verilerini okumak için InfluxDB kullanıyor. Docker ile kolayca InfluxDB çalıştırabilirsiniz.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run -p <span class=\"token number\">8086</span>:8086 <span class=\"token punctuation\">\\</span> \n  -e <span class=\"token assign-left variable\">INFLUXDB_DB</span><span class=\"token operator\">=</span>krakend <span class=\"token punctuation\">\\</span> \n  -e <span class=\"token assign-left variable\">INFLUXDB_USER</span><span class=\"token operator\">=</span>myusername -e <span class=\"token assign-left variable\">INFLUXDB_USER_PASSWORD</span><span class=\"token operator\">=</span>mypassword <span class=\"token punctuation\">\\</span> \n  -e <span class=\"token assign-left variable\">INFLUXDB_ADMIN_USER</span><span class=\"token operator\">=</span>admin -e <span class=\"token assign-left variable\">INFLUXDB_ADMIN_PASSWORD</span><span class=\"token operator\">=</span>myadminpassword <span class=\"token punctuation\">\\</span> \n  -d --name<span class=\"token operator\">=</span>influx-1.8 <span class=\"token punctuation\">\\</span> \n  influxdb:1.8 </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it influx-1.8 /bin/bash</code></pre></div>\n<hr>\n<h2 id=\"grafana-kurulumu\" style=\"position:relative;\"><a href=\"#grafana-kurulumu\" aria-label=\"grafana kurulumu permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Grafana Kurulumu</h2>\n<p>Eğer Grafana kurulu değilse yine  Docker ile çalıştırabilirsiniz. Komutu çalıştırdığınızda Grafana <code class=\"language-text\">http://localhost:3000</code> adresinde çalışıyor olacak.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token punctuation\">\\</span> \n  -d <span class=\"token punctuation\">\\</span> \n  -p <span class=\"token number\">3000</span>:3000 <span class=\"token punctuation\">\\</span> \n  --name<span class=\"token operator\">=</span>grafana <span class=\"token punctuation\">\\</span> \n  grafana/grafana </code></pre></div>\n<hr>\n<h2 id=\"krakend-konfigürasyonu\" style=\"position:relative;\"><a href=\"#krakend-konfig%C3%BCrasyonu\" aria-label=\"krakend konfigürasyonu permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KrakenD Konfigürasyonu</h2>\n<p>Aşağıdaki konfigürasyonu krakend.json dosyanıza root seviyesinde ekleyin. Bu konfigürasyonu yaptıktan sonra KrakenD metrikleriniz <code class=\"language-text\">&lt;your-influx-db-server-ip>:8086</code> adresindeki InfluxDB’ye kaydedilmeye başlayacak.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extra_config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"github_com/letgoapp/krakend-influx\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"http://&lt;your-influx-db-server-ip>:8086\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"ttl\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"25s\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"buffer_size\"</span><span class=\"token operator\">:</span><span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"github_com/devopsfaith/krakend-metrics\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"collection_time\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"30s\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"listen_address\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"127.0.0.1:8090\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"grafanaya-dashboard-kurulumu\" style=\"position:relative;\"><a href=\"#grafanaya-dashboard-kurulumu\" aria-label=\"grafanaya dashboard kurulumu permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Grafana’ya Dashboard Kurulumu</h2>\n<ol>\n<li>\n<p>İnternet tarayıcınız ile <code class=\"language-text\">http://localhost:3000</code> adresine gidin. Hem kullanıcı adı hem de şifre alanlarına <code class=\"language-text\">admin</code> yazarak giriş yapın.</p>\n</li>\n<li>\n<p>Yan menüden <code class=\"language-text\">Configuration</code>‘a tıklayın ve data source ekle butonunu bulun. Veritabanı olarak InfluxDB’yi seçin ve Docker ile InfluxDB’yi çalıştırırken girdiğiniz ayrıntıları doldurun:</p>\n<ul>\n<li>Query Language: <code class=\"language-text\">InfluxQL</code></li>\n<li>URL: <code class=\"language-text\">http://localhost:8086</code></li>\n<li>Access: <code class=\"language-text\">Browser</code></li>\n<li>Database: <code class=\"language-text\">krakend</code></li>\n<li>User: <code class=\"language-text\">admin</code></li>\n<li>Password: <code class=\"language-text\">myadminpassword</code></li>\n<li>HTTP Method: <code class=\"language-text\">GET</code></li>\n</ul>\n</li>\n<li>\n<p>Dashboardu import etmek için: Grafana arayüzünden yan menüdeki <code class=\"language-text\">+</code> simgesine tıklayın ve ardından <code class=\"language-text\">Import</code>‘a tıklayın. <code class=\"language-text\">Import via Grafana.com</code> seçeneğini seçin. Id olarak <code class=\"language-text\">5722</code> girin ve <code class=\"language-text\">Load</code>a tıklayın. Dashboardunuz hazır, güle güle kullanın.</p>\n</li>\n</ol>\n<h2 id=\"kaynaklar\" style=\"position:relative;\"><a href=\"#kaynaklar\" aria-label=\"kaynaklar permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kaynaklar</h2>\n<ul>\n<li><a href=\"https://grafana.com/grafana/dashboards/5722\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">KrakenD Grafana Dashboard on Grafana.com</a></li>\n<li><a href=\"https://www.krakend.io/docs/extended-metrics/influxdb/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Native InfluxDB exporter</a></li>\n<li><a href=\"https://www.krakend.io/docs/extended-metrics/grafana/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Preconfigured Grafana dashboard</a></li>\n</ul>","timeToRead":2,"frontmatter":{"title":"Grafana ile KrakenD Takibi","date":"January 17, 2022","spoiler":"KrakenD servislerinizi Grafana ile takip edin."},"fields":{"slug":"/tr/krakend-monitoring-with-grafana/","langKey":"tr"}}},"pageContext":{"slug":"/tr/krakend-monitoring-with-grafana/","translations":["tr"],"translatedLinks":[]}},
    "staticQueryHashes": ["336482444"]}